<!DOCTYPE html>
<html>
  <head>
    <title>GoInstant: Notification</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <script src="https://cdn.goinstant.net/v1/platform.min.js"></script>
    <script src="https://cdn.goinstant.net/widgets/user-colors/latest/user-colors.min.js"></script>

    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="../node_modules/lodash/lodash.js"></script>

    <script type="text/javascript" src="https://cdn.goinstant.net/v1/platform.min.js"></script>
    <script type="text/javascript" src="https://cdn.goinstant.net/widgets/notifications/latest/notifications.js"></script>
    <!-- CSS is optional -->

    <!-- Config -->
    <script src="../config/config.js"></script>

    <!-- Widget Example Page -->
    <link rel="stylesheet" href="../node_modules/widget-examples/css/examples.css" />
    <script src="../node_modules/widget-examples/js/template.js"></script>
    <script src="../node_modules/widget-examples/js/examples.js"></script>

    <!-- GoInstant Widget Build -->
    <link rel="stylesheet" href="../build/build.css" />
    <script src="../build/build.js"></script>
  </head>
  <body>

    <script type="text/javascript">

      // Define the example
      function widgetTest(room) {

        var notifications = new goinstant.widgets.Notifications({
          displayTimer: 400000
        });

        // Get all notifications
          notifications.subscribe(room, function(err) {
            if (err) {
              throw err;
            }
            // We're now receiving notifications
          });

          // Set options for the notification we're about to publish
          var options = {
            room: room,
            type: 'warning',
            message: 'Success: Message delivered',
            displayToSelf: true
          };

          // Send a single notification
          notifications.publish(options, function(err) {
            if (err) {
              throw err;
            }
            // Notification has been sent
          });

      }

      // Load the example test page
      $(document).ready(function() {

        // Replace 'Widget Name' with the widget being tested.
        // Replace 'example description' with a short description of this example.
        var config = {
          name: 'Notification',
          desc: 'Notifications',
          test: widgetTest
        };

        var example = new Example(config);
        example.load();
      });

    </script>

    <div id="common"></div>

    <div id="expected">
      <p>
      The expected behaviour of this page is as follows:
      </p>
      <ul>
        <li>A success notification should appear.</li>
      </ul>
    </div>

    <!-- Example specific HTML can go here -->

  </body>
</html>
